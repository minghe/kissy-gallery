KISSY.add("gallery/form/1.2/checkbox/index",function(k,n,o,p){function j(a,b){b=k.merge({target:a},b);j.superclass.constructor.call(this,b)}var e=o.all;k.extend(j,p);k.extend(j,n,{selectAll:function(){var a=this,b=a.get("kfbtn"),c=a.get("target");e(b).each(function(f,d){if(!(a._isSelected(f)||a._isDisabled(f))){f.addClass(a.get("cls").selected);e(c[d]).prop("checked",true)}});return a},resetAll:function(){var a=this,b=a.get("kfbtn"),c=a.get("cls").selected;a.get("cls");var f=a.get("target");e(b).each(function(d,
g){if(a._isSelected(d)){d.removeClass(c);e(f[g]).prop("checked",false)}});return a},_clickHandler:function(a){var b=this.get("target"),c=this.get("kfbtn"),f=this.get("cls").selected;e(b[a]).fire("click");e(c[a]).toggleClass(f)},getAllChecked:function(){var a=this.get("target"),b=[];i=0;for(len=a.length;i<len;i++)this._isSelected(e(a[i]))&&!this._isDisabled(e(a[i]))&&b.push(i);return b},_labelHandler:function(a,b){var c=this,f,d=c.get("target"),g=e(c.get("kfbtn")),h=c.get("cls"),l=h.selected,m=h.hover;
f=(h=c.get("getLabelFunc"))?h(e(d[a])):b.next("label");f.on("click",function(){if(!c._isDisabled(g[a])){f.contains(b)&&b.detach("click");if(c._isSelected(d[a])){b.removeClass(l);e(d[a]).prop("checked",false)}else{b.addClass(l);e(d[a]).prop("checked",true)}}}).on("mouseenter",function(){if(!(c._isDisabled(g[a])||c._isSelected(g[a]))){f.contains(b)&&b.detach("mouseenter");b.addClass(m)}}).on("mouseleave",function(){if(!c._isDisabled(g[a])){f.contains(b)&&b.detach("mouseleave");b.removeClass(m)}})},
_bindEvent:function(){var a=this,b=e(a.get("kfbtn")),c=this.get("cls").hover,f=a.get("hasLabel");a.get("target");a.get("getLabelFunc");b.each(function(d,g){d.on("mouseenter mouseleave",function(h){if(!(a._isSelected(d)||a._isDisabled(d)))switch(h.type){case "mouseenter":d.addClass(c);break;case "mouseleave":d.removeClass(c)}}).on("click",function(){a._isDisabled(d)||a._clickHandler.call(a,g)}).on("keyup",function(h){h.keyCode===13&&d.fire("click")});f&&a._labelHandler(g,d)})}},{ATTRS:{target:{value:"",
setter:function(a){return e(a)},getter:function(a){return e(a)}},kfbtn:{value:[]},cls:{value:{init:"ks-checkbox",selected:"ks-checkbox-checked",disabled:"ks-checkbox-disabled",hover:"ks-checkbox-hover"}},cssUrl:{value:"gallery/form/1.2/checkbox/themes/default/style.css"},hasLabel:{value:false},getLabelFunc:{value:undefined,setter:function(a){return a},getter:function(a){return a}},accessible:{value:false}}});return j},{requires:["base","node","gallery/form/1.2/radio/index"]});
