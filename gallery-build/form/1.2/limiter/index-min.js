KISSY.add("gallery/form/1.2/limiter/index",function(d,i,j){function c(a,b){b=d.merge({target:g(a)},b);c.superclass.constructor.call(this,b)}var g=i.all;d.mix(c,{tpl:{DEFAULT:'<span class="ks-letter-count">你还可以输入<em class="J_LetterRemain">{remain}</em>个汉字</span>'},event:{RENDER:"render",COUNT:"count"}});d.extend(c,j,{render:function(){var a=this,b=a.get("target");if(!b.length)return false;a.set("tpl",a.get("defaultTpl"));a.count();b.on("keyup blur",function(){a.count()});a.fire(c.event.RENDER)},count:function(){var a=
this.get("len"),b=this.get("max"),f=this.get("defaultTpl"),e=this.get("exceedTpl");this.set("tpl",a>b&&e||f);this._create();this.fire(c.event.COUNT)},_create:function(){var a=this.get("wrapper"),b=this.get("target"),f=this.get("tpl"),e=this.get("max"),h=this.get("len");if(!b.length)return false;b=d.substitute(f,{len:h,max:e,remain:Math.abs(e-h)});a.html(b)}},{ATTRS:{wrapper:{value:"",getter:function(a){return g(a)}},target:{value:""},el:{value:""},tpl:{value:""},defaultTpl:{value:'<span class="ks-letter-count">你还可以输入<em class="J_LetterRemain">{remain}</em>个汉字</span>'},
exceedTpl:{value:'<span class="ks-letter-count">已经超出<em class="J_LetterRemain exceed-letter">{remain}</em>个汉字</span>'},max:{value:50},len:{value:0,getter:function(){var a=this.get("target").val();if(this.get("isRejectTag"))a=a.replace(/<[^>]*>/g,"");return a.length}},isRejectTag:{value:false}}});return c},{requires:["node","base"]});
