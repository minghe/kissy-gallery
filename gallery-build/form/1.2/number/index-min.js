KISSY.add("gallery/form/1.2/number/index",function(i,l,m){function j(a,b){b=i.merge({target:e(a)},b);j.superclass.constructor.call(this,b)}var e=l.all,k=i.DOM;i.extend(j,m,{render:function(){if(!this.get("target").length)return false;this.addHTML();this.eventOnChangeNum();this.eventOnValide()},addHTML:function(){var a=this.get("target"),b=this.get("cls"),c=this.get("accessible"),d=a.parent(),f=e(k.create('<span class="'+b.container+'">')),h=e(k.create("<a>",{href:"#!/price/plus",text:"-"})),g=e(k.create("<a>",
{href:"#!/price/minus",text:"+"}));h.addClass(b.plus);g.addClass(b.minus);c&&a.addAttr("aria-label","出价框，请输入价格");f.append(g).append(a).append(h);d.append(f)},eventOnChangeNum:function(){var a=this,b=a.get("target"),c,d=+b.attr("data-range")||1,f=a.get("trigger"),h=e(f.plus);f=e(f.minus);var g=a.limitRange;h.on("click",function(){c=+b.val();c+=d;g.call(a,c)});f.on("click",function(){c=+b.val();c-=d;g.call(a,c)})},eventOnValide:function(){var a=this,b=a.get("target"),c=a.formatNum,d=a.limitRange;b.on("blur",
function(){c.call(a,b);d.call(a,+b.val())})},toFloat:function(a){return parseFloat(a,10)},formatNum:function(a){var b=+a.attr("data-min")||1,c=this.toFloat(a.val().replace(/[^\d\.]/g,""));c=isNaN(c)?b:Math.max(c,b);a.val(c.toFixed(2))},limitRange:function(a){var b=this.get("target"),c=this.toFloat,d=c(b.attr("data-min"))||1;c=c(b.attr("data-max"))||1;a=d&&Math.max(d,a);a=c&&Math.min(c,a);b.val(a.toFixed(2))}},{ATTRS:{target:{value:"",setter:function(a){return e(a)},getter:function(a){return e(a)}},
trigger:{value:{plus:".ks-number-plus",minus:".ks-number-minus"}},cls:{value:{init:"ks-price-input",plus:"ks-number-plus",minus:"ks-number-minus",container:"ks-plus-minus-operation"}},accessible:{value:false}}});return j},{requires:["node","base","./index.css"]});
