KISSY.add("gallery/form/1.1/radio/index",function(j,p,q){function n(a,b){b=j.merge({target:a},b);n.superclass.constructor.call(this,b)}var c=p.all;j.extend(n,q,{render:function(){this.loadCss();this.replaceRadio();this.bindEvent()},recoverRadio:function(){var a=this.get("target"),b=this.get("radio");c(b).each(function(e,d){e.hide();c(a[d]).show()});return this},_replaceRadio:function(){var a=this,b=a.get("target"),e=a._getHtml(0),d=a._getHtml(2),k=a._getHtml(1),h,l=[],f=a.get("accessible"),m=a.get("getLabelFunc"),
o;if(b.length===0)return false;b.each(function(g){g.hide();if(a._isDisabled(g))h=c(d).insertBefore(g).attr("ks-radio-disabled","disabled").removeAttr("tabindex");else{h=a._isSelected(g)?c(k):c(e);h.insertBefore(g)}if(f)try{o=m?m(g).html():g.next("label").html();h.attr("aria-label",o)}catch(r){j.log("html结构不符合");return false}l.push(h)});a.set("radio",l)},_loadCss:function(){var a=this.get("cssUrl");a!==""&&j.use(a,function(){})},_getHtml:function(a){var b=this.get("cls"),e=b.selected,d=b.disabled;
b={defalutName:b.init};switch(a){case 0:b.secondName="";break;case 1:b.secondName=e;break;case 2:b.secondName=d}return j.substitute('<span tabindex="0" class="{defalutName} {secondName}"></span>',b)},_bindEvent:function(){var a=this,b=c(a.get("radio")),e=this.get("cls").hover,d=a.get("hasLabel"),k=a.get("target"),h=a.get("getLabelFunc"),l;b.each(function(f,m){f.on("mouseenter mouseleave",function(g){if(!(a._isSelected(f)||a._isDisabled(f)))switch(g.type){case "mouseenter":f.addClass(e);break;case "mouseleave":f.removeClass(e)}}).on("click",
function(){a._isDisabled(f)||a._clickHandler.call(a,m)}).on("keyup",function(g){g.keyCode===13&&f.fire("click")});if(d)try{l=h?h(c(k[m])):f.next("label");l.on("click",function(){f.fire("click")}).on("mouseenter",function(){f.fire("mouseenter")}).on("mouseleave",function(){f.fire("mouseleave")})}catch(o){j.log("html结构不符合");return false}})},_clickHandler:function(a){var b=this.get("target"),e=c(this.get("radio"));radio=c(this.get("radio")[a]);getCls=this.get("cls");selectedClass=getCls.selected;hoverClass=
getCls.hover;c(b[a]).fire("click");e.each(function(d){d.removeClass(selectedClass).removeClass(hoverClass)});radio.addClass(selectedClass)},_isDisabled:function(a){var b=c(a).attr("disabled");a=c(a).attr("ks-radio-disabled");return b==="disabled"||a==="disabled"},_isSelected:function(a){var b=c(a).prop("checked");a=c(a).hasClass(this.get("cls").selected);return b||a},setDisabled:function(a){var b=this.get("radio"),e=this.get("target"),d=this.get("cls"),k=d.selected,h=d.disabled;d=d.hover;if(typeof a===
"number"){b=c(b[a]);a=c(e[a]);b.attr("ks-radio-disabled","disabled").removeClass(k+" "+d).addClass(h);a.attr("disabled","disabled")}b.removeAttr("tabindex");return this},setAvailabe:function(a){var b=this.get("radio"),e=this.get("target"),d=this.get("cls").disabled;if(j.isNumber(a)){b=c(b[a]);a=c(e[a]);b.removeAttr("ks-radio-disabled","disabled").removeClass(d);a.removeAttr("disabled","disabled")}b.attr("tabindex","0");return this},getSelected:function(){var a=this.get("target"),b;i=0;for(len=a.length;i<
len;i++){b=c(a[i]);if(!this._isDisabled(b))if(this._isSelected(b))return i}return null}},{ATTRS:{target:{value:"",setter:function(a){return c(a)},getter:function(a){return c(a)}},radio:{value:[]},cls:{value:{init:"ks-radio",selected:"ks-radio-selected",disabled:"ks-radio-disabled",hover:"ks-radio-hover"}},cssUrl:{value:"gallery/form/1.1/radio/themes/default/style.css"},hasLabel:{value:false},getLabelFunc:{value:undefined,setter:function(a){return a},getter:function(a){return a}},accessible:{value:false}}});
return n},{requires:["node","base"]});
